.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "RES_HOST 1"
.TH RES_HOST 1 "2014-09-13" "Clockwork v2.3.0" "Clockwork Manual"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
res_host \- Clockwork Resource Type for /etc/hosts entries
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The /etc/hosts file associates \s-1IP\s0 addresses to hostnames, without the use of external
systems like \s-1NIS, LDAP\s0 or \s-1DNS. \s0 Through the \fBhost\fR resource, a Clockwork policy
can modify individual entries in /etc/hosts, without having to specify a complete map.
.SH "ATTRIBUTES"
.IX Header "ATTRIBUTES"
.IP "\fBhostname\fR" 4
.IX Item "hostname"
The hostname that the entry should map its \s-1IP\s0 address to.
.IP "\fBip\fR" 4
.IX Item "ip"
The IPv4 or IPv6 address for this entry.
.IP "\fBalias\fR" 4
.IX Item "alias"
.PD 0
.IP "\fBaliases\fR" 4
.IX Item "aliases"
.PD
One or more hostname aliases.  If multiple aliases are specified, they must be
separated by a single space.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.SS "Basic Usage"
.IX Subsection "Basic Usage"
Map 10.0.0.21 to the hostname 'testhost1':
.PP
.Vb 3
\&    host "testhost1" {
\&        ip: "10.0.0.21"
\&    }
.Ve
.SS "Alias Usage"
.IX Subsection "Alias Usage"
Map 10.0.0.21 to 'testhost1', but make 'test\-1' and 'lab1' aliases:
.PP
.Vb 5
\&    host "testhost1" {
\&        ip:    "10.0.0.21"
\&        alias: "test\-1"
\&        alias: "lab1"
\&    }
.Ve
.PP
Same as above, but specify both aliases in a single directive:
.PP
.Vb 4
\&    host "testhost1" {
\&        ip:      "10.0.0.21"
\&        aliases: "test\-1 lab1"
\&    }
.Ve
.SH "CAVEATS"
.IX Header "CAVEATS"
Clockwork tries to be predictable and not clever.  As such, it does not
attempt to deal with certain edge cases that crop up when managing
hosts file entries.  Namely:
.SS "1. Consolidating Hosts"
.IX Subsection "1. Consolidating Hosts"
If /etc/hosts contains the following:
.PP
.Vb 3
\&    172.16.0.45   hosta
\&    172.16.0.46   hostb
\&    172.16.0.47   hostc
.Ve
.PP
And the policy manifest only specifies these host resources:
.PP
.Vb 2
\&    host "hostb" { ip: "172.16.0.45" }
\&    host "hostc" { ip: "172.16.0.47" }
.Ve
.PP
Clockwork will not remove the entry for \fIhosta\fR.  It won't even
modify the entry for \fIhostb\fR, but will instead append a fourth:
.PP
.Vb 4
\&    172.16.0.45   hosta
\&    172.16.0.46   hostb
\&    172.16.0.47   hostc
\&    172.16.0.45   hostb
.Ve
.SS "2. Overlapping Canonical and Alias Hostnames"
.IX Subsection "2. Overlapping Canonical and Alias Hostnames"
Clockwork does not try to reconciliate overlap between canonical hostnames
and aliases. If you are experiencing issues in this space, please contact
the developers so that we can understand your needs.
.SH "DEPENDENCIES"
.IX Header "DEPENDENCIES"
None.
.SH "BUGS"
.IX Header "BUGS"
There is currently no way to remove a host entry.
.PP
There really should be an implicit dependency on /etc/hosts, if defined in
the policy.  That way, host resources take precedence over file resources,
and administrators can push out a base /etc/hosts via \fBres_file\fR(5), and
then tweak it with \fBres_host\fR.
.PP
Caveat #1 (see \fB\s-1CAVEATS\s0\fR) could be side-stepped if a new attribute was
introduced to: \fBexclusive\fR.  This attribute could be set to \*(L"ip\*(R" or
\&\*(L"hostname\*(R" and would instruct the fixup routines to kill off all other entries
matching either the \s-1IP\s0 or the hostname (but not necessarily both).
.SH "AUTHOR"
.IX Header "AUTHOR"
Clockwork was designed and written by James Hunt.
