.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "CLOCKD 1"
.TH CLOCKD 1 "2014-09-13" "Clockwork v2.3.0" "Clockwork Manual"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
clockd.conf \- Clockwork Master configuration file
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fB/etc/clockwork/clockd.conf\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBclockd\fR(1) reads its configuration from
\&\fI/etc/clockwork/clockd.conf\fR (unless a different file is
specified with the \-c option).
.PP
Valid configuration directives, and their meanings, are as follows:
.IP "\fBlisten\fR \- Listen directive" 4
.IX Item "listen - Listen directive"
This specifies what interfaces/addresses \fBclockd\fR should bind
to, for inbound connections from \fBcogd\fR agents.  The default
port is \fI2314\fR, and most of the time you'll want to listen on
any available interface.  This is the default, \efI*:2314\efB.
.IP "\fBmanifest\fR \- Policy Manifest File" 4
.IX Item "manifest - Policy Manifest File"
The manifest contains all of the policy definitions, and what
clients they should be given to.
.IP "\fBcopydown\fR \- Copydown Source Directory" 4
.IX Item "copydown - Copydown Source Directory"
Clients connecting to \fBclockd\fR start their configuration runs
by performing a \fB\s-1COPYDOWN\s0\fR, in which they copy static files
(usually gatherer scripts) locally.
.Sp
This setting determines what files are included in the copydown
archive.  Paths will be relative to the client's \fBcopydown\fR
setting.
.Sp
Defaults to \fI/etc/clockwork/gather.d\fR.
.IP "\fBsecurity.strict\fR \- Security Mode" 4
.IX Item "security.strict - Security Mode"
When clients connect, \fBclockd\fR will always check that they have a
secured channel (thus validating their public/private keypair).  For
production sites, it is also a good idea to check that the client has been
pre-authenticated, by checking against a list of trusted public key
fingerprints, the so-called \fItrust database\fR, or \fItrustdb\fR.
.Sp
Setting \fBsecurity.strict\fR to \fIyes\fR (the default) engages this
behavior.
.Sp
Environments (usually not mission-critical, like testbeds and experimental
labs) can bypass this extra security by setting security.strict to \fIno\fR.
This is \fBnot recommended\fR for production deployments!
.IP "\fBsecurity.trusted\fR \- Trust Database" 4
.IX Item "security.trusted - Trust Database"
Under strict mode, the trust database is consulted to ensure that remote
clients are trusted to receive policy and file data, which could contain
sensitive and/or privileged information.
.Sp
The trust database can be managed by hand, or by \fBcw-trust\fR(1).
.Sp
Defaults to \fI/etc/clockwork/certs/trusted\fR.
.IP "\fBsecurity.cert\fR \- Master Certificate" 4
.IX Item "security.cert - Master Certificate"
This certificate is used to identify this \fBclockd\fR instance to
connecting clients.  It must contain both the public and private keys.
.Sp
Defaults to \fI/etc/clockwork/certs/clockd\fR.
.IP "\fBccache.connections\fR \- Connection Cache Entries" 4
.IX Item "ccache.connections - Connection Cache Entries"
This configuration option lets you size the connection cache to
the infrastructure.  For each client that connects, \fBclockd\fR
keeps an entry in the connection cache to keep track of the
generated policy, known facts, etc.  Cache entries are purged
regularly, pursuant to \fBccache.expiration\fR, to make room for
new client connections.
.Sp
The value chosen for the connection cache size depends on the
number of concurrent clients you expect \fBclockd\fR to service.
For most environments the default size of \fI2048\fR entries
should be sufficient.
.IP "\fBccache.expiration\fR \- Connection Cache Expiration" 4
.IX Item "ccache.expiration - Connection Cache Expiration"
.PD 0
.IP "\fBclockd\fR keeps track of each client that connects, by storing their state information in an entry in the connection cache.  This configuration option lets you adjust how soon \fBclockd\fR will try to reclaim stale entries for use in new client connections." 4
.IX Item "clockd keeps track of each client that connects, by storing their state information in an entry in the connection cache. This configuration option lets you adjust how soon clockd will try to reclaim stale entries for use in new client connections."
.PD
This value is specified in seconds.
.IP "\fBpidfile\fR \- \s-1PID\s0 file for storing the daemon process \s-1ID\s0" 4
.IX Item "pidfile - PID file for storing the daemon process ID"
Defaults to \fI/var/run/clockd.pid\fR.
.IP "\fBsyslog.ident\fR \- Syslog identity string" 4
.IX Item "syslog.ident - Syslog identity string"
Defaults to \fIclockd\fR.
.IP "\fBsyslog.facility\fR \- Syslog facility for logging" 4
.IX Item "syslog.facility - Syslog facility for logging"
Defaults to \fIdaemon\fR.
.IP "\fBsyslog.level\fR \- Log level" 4
.IX Item "syslog.level - Log level"
Valid values are:
.RS 4
.IP "\fBcritical\fR" 4
.IX Item "critical"
Fatal issues that cause immediate termination.
.IP "\fBerror\fR" 4
.IX Item "error"
Non-fatal issues that prevent proper system operation.
.IP "\fBwarning\fR" 4
.IX Item "warning"
Minor problems that do not hinder system operation.
.IP "\fBnotice\fR" 4
.IX Item "notice"
Informational messages that assist in system diagnostics.
.IP "\fBinfo\fR" 4
.IX Item "info"
More in-depth informational messages, for troubleshooting.
.IP "\fBdebug\fR" 4
.IX Item "debug"
Messages for chasing down bugs.
.RE
.RS 4
.Sp
Each level includes all \*(L"more important\*(R" levels.  \fBwarning\fR
will log \fBcritical\fR and \fBerror\fR messages.  \fBnotice\fR is
everything but debugging messages, etc.
.Sp
A good starting point is \fIwarning\fR; default is \fIerror\fR.
.RE
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Here is the default configuration, made explicit:
.PP
.Vb 4
\&    listen              *:2314
\&    pidfile             /var/run/clockd.pid
\&    manifest            /etc/clockwork/manifest.pol
\&    copydown            /etc/clockwork/gather.d
\&
\&    security.strict     yes
\&    security.trusted    /etc/clockwork/certs/trusted
\&    security.cert       /etc/clockwork/certs/clockd
\&
\&    ccache.connections  2048
\&    ccache.expiration   600
\&
\&    syslog.ident        clockd
\&    syslog.facility     daemon
\&    syslog.level        error
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fBclockwork\fR(7), \fBclockd\fR(1), \fBclockd.conf\fR(5) and \fBcogd.conf\fR(5)
.SH "AUTHOR"
.IX Header "AUTHOR"
Clockwork was designed and written by James Hunt.
