.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "RES_USER 5"
.TH RES_USER 5 "2014-09-15" "Clockwork v2.3.0" "Clockwork Manual"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
res_user \- Clockwork Resource Type for system users
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The user resource manages system user accounts.
.SH "ATTRIBUTES"
.IX Header "ATTRIBUTES"
.IP "\fBuid\fR" 4
.IX Item "uid"
Numeric user \s-1ID\s0 of this account.
.IP "\fBusername\fR" 4
.IX Item "username"
The username for this account.
.IP "\fBgid\fR" 4
.IX Item "gid"
Numeric group \s-1ID\s0 for this acount's primary group.
.IP "\fBhome\fR" 4
.IX Item "home"
Path to this user's home directory.  This attribute only sets
the home directory path in /etc/password.  To create home directories
for new users, see the \fBmakehome\fR / \fBskeleton\fR attribute.
.IP "\fBpresent\fR" 4
.IX Item "present"
Whether or not this account should exist on the system.
.IP "\fBlocked\fR" 4
.IX Item "locked"
Whether or not this account should be locked and therefore unable
to log in.  Locking an account does not destroy password information;
a locked account can be unlocked later and the original password will
work.
.IP "\fBcomment\fR" 4
.IX Item "comment"
.PD 0
.IP "\fBgecos\fR" 4
.IX Item "gecos"
.PD
A comment describing the purpose of this account, commonly refered to
as the \s-1GECOS\s0 field.  See \fBpasswd\fR(5) for more details.
.Sp
Clockwork does not attempt to interpret the \s-1GECOS\s0 field like the
\&\fBchfn\fR(1) utility does.
.IP "\fBshell\fR" 4
.IX Item "shell"
The path to the login shell for this account.  No validation is done
on this shell, since specifying non-existent or unapproved login shells
is one way of locking accounts out of a system.
.IP "\fBpassword\fR" 4
.IX Item "password"
.PD 0
.IP "\fBpwhash\fR" 4
.IX Item "pwhash"
.PD
The (encrypted) password for this account.  Details of encryption depend
on the specific platform and system configuration.  Clockwork does not
attempt to encrypt or decrypt passwords for users.
.IP "\fBchangepw\fR" 4
.IX Item "changepw"
Whether or not Clockwork should change the passowrd of an existing user
account, according to the value of \fBpassword\fR.  The primary use of
this attribute is for provisioning new accounts with default initial
passwords, but not forcibly reseting the password during subsequent
runs.
.IP "\fBpwmin\fR" 4
.IX Item "pwmin"
Minimum number of days between password changes.
.IP "\fBpwmax\fR" 4
.IX Item "pwmax"
Maximum age of the account password (in days).
.IP "\fBpwwarn\fR" 4
.IX Item "pwwarn"
Number of days before the password expires (according to \fBpwmax\fR)
to start warning the user that they should change their password.
.IP "\fBinact\fR" 4
.IX Item "inact"
Number of days after the password expires (according to \fBpwmax\fR)
before the account is reversibly disabled.
.IP "\fBexpiry\fR" 4
.IX Item "expiry"
.PD 0
.IP "\fBexpiration\fR" 4
.IX Item "expiration"
.PD
When the account expires.  This value is specified as the number of days
since Jan 1, 1970, and is not related to the \fBpwmax\fR, \fBpwmin\fR or
\&\fBinact\fR attributes.
.IP "\fBskeleton\fR" 4
.IX Item "skeleton"
.PD 0
.IP "\fBmakehome\fR" 4
.IX Item "makehome"
.PD
This attribute enables home directory creation for new users.  Valid values
include \*(L"yes\*(R", \*(L"no\*(R" or a path to a skeleton directory.  If \*(L"yes\*(R" is used,
then the system default of /etc/skel is used as a template to create the
new home directory.  Otherwise, the path given is used.
.Sp
Home directory creation is only effective if the account does not already
exist on the local system; Clockwork will not overwrite or otherwise meddle
with a pre-existing home directory.
.Sp
See the \fB\s-1EXAMPLES\s0\fR section for more information.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.SS "Removing and Locking Accounts"
.IX Subsection "Removing and Locking Accounts"
To remove a user account:
.PP
.Vb 3
\&    user "jim" {
\&        present: "no"
\&    }
.Ve
.PP
To keep the account around (including its original password),
but deny any and all login access to it:
.PP
.Vb 3
\&    user "jim" {
\&        locked: "yes"
\&    }
.Ve
.SS "Password Expiration"
.IX Subsection "Password Expiration"
The following example implements a password expiration policy:
.PP
.Vb 4
\&    user "eva" {
\&      pwmin:  1   # After password change, user must
\&                  # wait at least 1 day to change their
\&                  # password again.
\&
\&      pwmax:  45  # Passwords *must* be changed after
\&                  # 45 days.
\&
\&      pwwarn: 10  # Warn the user 10 days before their
\&                  # password expires that they will have
\&                  # to change it soon.  Under normal
\&                  # circumstances, this will be 35 days
\&                  # after they change it.
\&
\&      inact:  5   # Give the users 5 days after their
\&                  # password expires (50 days after they
\&                  # change it) before disabling the
\&                  # account.
\&    }
.Ve
.PP
If you specify password aging parameters, make sure you don't also set
the account password via the \fBpassword\fR / \fBpwhash\fR and
\&\fBchangepw\fR attributes.
.SS "Creating Home Directories"
.IX Subsection "Creating Home Directories"
The user resource can create the home directory for newly created
users if the \fBmakehome\fR or \fBskeleton\fR attributes are set.
.PP
Create the user \*(L"bob\*(R", and model his home directory after /etc/skel:
.PP
.Vb 6
\&    user "bob" {
\&        uid:      1006
\&        gid:      1001   # users, defined elsewhere
\&        home:     "/home/guests/bob"
\&        makehome: "yes"
\&    }
.Ve
.PP
If you want to use a different skeleton directory (i.e. for system
administrator accounts), specify its path in the \fBmakehome\fR
attribute:
.PP
.Vb 6
\&    user "james" {
\&      uid:       7001,
\&      gid:       1002,   # admins, defined elsewhere
\&      home:      "/home/james"
\&      makehome:  "/etc/skel.admin"
\&    }
.Ve
.PP
\&\fBNote:\fR
The \fBmakehome\fR and \fBskeleton\fR attributes are synonymous.
The last example is probably more clearly expressed as:
.PP
.Vb 6
\&    user "james" {
\&      uid:       7001,
\&      gid:       1002,   # admins, defined elsewhere
\&      home:      "/home/james"
\&      skeleton:  "/etc/skel.admin"
\&    }
.Ve
.SH "CAVEATS"
.IX Header "CAVEATS"
.SS "1. Removing Home Directories"
.IX Subsection "1. Removing Home Directories"
Clockwork does not remove a user's home directory when it removes
the account.  This is by design, to ensure that important data
is not lost when users depart.  If you want to remove the home
directory, use \fBres_file\fR(5) in concert with \fBres_user\fR.
.SS "2. Dependencies"
.IX Subsection "2. Dependencies"
For flexibility's sake, Clockwork does not create implicit dependencies
on users for  their primary group.  If you specify that a user's primary \s-1GID\s0
should be 177, Clockwork will happily comply, even if there is no group
defined on the system (either through policy or externally) with that \s-1GID.\s0
.PP
This should not break normal operation of the system, but it will lead to
some strangeness when dealing with files owned by that user.
.SH "DEPENDENCIES"
.IX Header "DEPENDENCIES"
See Caveat #2.
.SH "AUTHOR"
.IX Header "AUTHOR"
Clockwork was designed and written by James Hunt.
