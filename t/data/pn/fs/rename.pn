;;
;; fs/rename.pn
;; Pendulum Test Script
;;

SET %A "t/tmp/pn/fs/before"
SET %B "the file\n"
CALL &FS.PUT
OK? @ok1
  PRINT "PUT failed\n"
  SYSERR
  HALT

ok1:
SET %B "t/tmp/pn/fs/after"
CALL &FS.RENAME
COPY %B %A
CALL &FS.GET
OK? @ok2
  PRINT "GET failed\n"
  SYSERR
  HALT

ok2:
COPY %S2 %T1
SET %T2 "the file\n"
CMP? @ok3
  COPY %S2 %A
  PRINT "unexpected output '%s'\n"
  SYSERR
  HALT

ok3:
PRINT "OK\n"

