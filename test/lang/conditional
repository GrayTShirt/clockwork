#
# This example policy file illustrates the potential use of
# of conditionals based on client host facts
#

# A standard with some conditional behavior.
profile standard {

	file "/etc/sudoers" {
		owner: root
		group: root
		mode: 0600
	}

	file "/etc/snmpd/snmpd.conf" {
		owner: root
		group: root
		mode:  0644
		# Change the source file based on the sys.kernel.major fact
		source = ((for sys.kernel.major:
			"2.6": "clockwork:///standard/snmpd.conf";
			"2.4": "clockwork:///legacy/snmpd.conf"))
	}

	# Only define this user for Ubuntu Lucid Lynx or Karmic Koala
	((if lsb.distro.codename is ["lucid", "karmic"]:

		user "ubuntu-recent" {
			uid: 20050; gid: 20050
			home: "/srv/oper/ubuntu"
		}

	))

	# Otherwise, the username should be "ubuntu-legacy"
	((unless lsb.distro.codename is ["lucid", "karmic"]:

		user "ubuntu-legacy" {
			uid: 20050; gid: 20050
			home: "/srv/oper/ubuntu"
		}
	))
}

# vim:ft=conf
