\"
\"  Copyright 2011-2013 James Hunt <james@niftylogic.com>
\"
\"  This file is part of Clockwork.
\"
\"  Clockwork is free software: you can redistribute it and/or modify
\"  it under the terms of the GNU General Public License as published by
\"  the Free Software Foundation, either version 3 of the License, or
\"  (at your option) any later version.
\"
\"  Clockwork is distributed in the hope that it will be useful,
\"  but WITHOUT ANY WARRANTY; without even the implied warranty of
\"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
\"  GNU General Public License for more details.
\"
\"  You should have received a copy of the GNU General Public License
\"  along with Clockwork.  If not, see <http://www.gnu.org/licenses/>.
\"

.TH policyd "1" "March 2013" "Clockwork" "Clockwork Certificate Tool"
.SH NAME
cwcert \- Clockwork Agent Certificate Manager
.br
.SH SYNOPSIS
.B cwcert
command [options]

.SH DESCRIPTION
.B Clockwork
is a system configuration management system designed to securely enforce
policies on one or more host systems.  It can ensure that files have the
prescribed attributes (owner, group, permissions, etc.) and content.  It
can maintain a specific set of installed packages, and even make sure that
system user accounts exist.
.PP
.B cwcert
manages the local Clockwork Agent certificate.  It is responsible for
requesting an initial certificate, testing the local certificate and
managing renewal.

.SH COMMANDS

.PP
\fBnew\fR
.RS 8
Generate a new host certificate.  \fBcwcert\fR will ask for the
following information:
.PP
.RS 4
.nf
1. Country (C)
2. State / Province (ST)
3. Locality / City (L)
4. Organization (O)
5. Organizational Unit (OU)
.fi
.RE
.PP
In batch mode (\fB\-\-batch\fR), this information should be
supplied on standard input, one item per line, in order.
Leading and trailing whitespace will be read in as-is.
.RE

.PP
\fBdetails\fR
.RS 8
Print information about this host's certificate or
certificate request.
.RE

.PP
\fBrenew\fR
.RS 8
Renew this host's certificate.
.RE

.PP
\fBtest\fR
.RS 8
Test local certificate against policy master.
.RE

.PP
\fBhelp\fR
.RS 8
Show the help screen.
.RE

.SH OPTIONS
.PP
\fB\-V, \-\-version\fR
.RS 8
Print version and copyright information.
.RE

.PP
\fB\-c, \-\-config\fR \fI/path/to/cwa.conf\fR
.RS 8
Specify the path to an alternate configuration file.  If not given, the
default configuration file (/etc/clockwork/cwa.conf) is used instead.
.RE

.PP
.B \-v[vvv...]
.RS 8
Increase verbosity by one level.  Can be used more than once.
.RE

.PP
.B \-O, \-\-offline
.RS 8
Perform all operations without contacting the Policy Master.
.RE

.PP
.B \-b, \-\-batch
.RS 8
Operate in \fIbatch mode\fR.  In batch mode, interactive prompting is
disabled, and any required input can be supplied by simple line-based
files redirected to standard input.
.PP
Batch mode can be used with the \fBnew\fR command to automate
certificate generation.

.PP
.B \-D, \-\-debug
.RS 8
Run in debug mode, logging to stderr instead of syslog.
.RE

.SH FILES
.TP 8
.B /etc/clockwork/cwa.conf
Default configuration file that
.B cwcert
reads on start up.  See \fBcwa.conf\fR(5) for details.

.SH SEE ALSO
\fBclockwork\fR(7), \fBcwa\fR(1) and \fBcwa.conf\fR(5)

.SH AUTHOR
Clockwork was designed and written by James Hunt.
